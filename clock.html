<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🗓️ Time 🗓️</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>Time We've Been Together!</h1>

  <div id="clock">
    <div class="time-segment"><span id="years"></span> <span class="label">Years</span></div>
    <div class="time-segment"><span id="months"></span> <span class="label">Months</span></div>
    <div class="time-segment"><span id="weeks"></span> <span class="label">Weeks</span></div>
    <div class="time-segment"><span id="days"></span> <span class="label">Days</span></div>
    <div class="time-segment"><span id="hours"></span> <span class="label">Hours</span></div>
    <div class="time-segment"><span id="minutes"></span> <span class="label">Minutes</span></div>
    <div class="time-segment"><span id="seconds"></span> <span class="label">Seconds</span></div>
  </div>
  
  <h1>That Means...</h1>

  <div id="totals">
    <div class="time-segment"><span id="totalYears"></span> <span class="label">Total Years</span></div>
    <div class="time-segment"><span id="totalMonths"></span> <span class="label">Total Months</span></div>
    <div class="time-segment"><span id="totalWeeks"></span> <span class="label">Total Weeks</span></div>
    <div class="time-segment"><span id="totalDays"></span> <span class="label">Total Days</span></div>
    <div class="time-segment"><span id="totalHours"></span> <span class="label">Total Hours</span></div>
    <div class="time-segment"><span id="totalMinutes"></span> <span class="label">Total Minutes</span></div>
    <div class="time-segment"><span id="totalSeconds"></span> <span class="label">Total Seconds</span></div>
  </div>

  <a href="index.html" class="back">← Back to Home</a>
  
  <script>
    const startDate = new Date(2021, 8, 13, 15, 45, 0); // Sept 13, 2021, 3:45 PM

    function updateClock() {
      const now = new Date();

      // Calculate years and months (like before)
      let years = now.getFullYear() - startDate.getFullYear();
      let months = now.getMonth() - startDate.getMonth();
      let days = now.getDate() - startDate.getDate();

      if (days < 0) {
        months--;
        const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0);
        days += prevMonth.getDate();
      }

      if (months < 0) {
        years--;
        months += 12;
      }

      const adjustedStart = new Date(startDate);
      adjustedStart.setFullYear(adjustedStart.getFullYear() + years);
      adjustedStart.setMonth(adjustedStart.getMonth() + months);

      let diffMs = now - adjustedStart;

      const msInSecond = 1000;
      const msInMinute = msInSecond * 60;
      const msInHour = msInMinute * 60;
      const msInDay = msInHour * 24;
      const msInWeek = msInDay * 7;

      const weeks = Math.floor(diffMs / msInWeek);
      diffMs -= weeks * msInWeek;

      const remDays = Math.floor(diffMs / msInDay);
      diffMs -= remDays * msInDay;

      const hours = Math.floor(diffMs / msInHour);
      diffMs -= hours * msInHour;

      const minutes = Math.floor(diffMs / msInMinute);
      diffMs -= minutes * msInMinute;

      const seconds = Math.floor(diffMs / msInSecond);

      // Update "clock" display (years, months, weeks, days...)
      document.getElementById('years').textContent = years;
      document.getElementById('months').textContent = months;
      document.getElementById('weeks').textContent = weeks;
      document.getElementById('days').textContent = remDays;
      document.getElementById('hours').textContent = hours;
      document.getElementById('minutes').textContent = minutes;
      document.getElementById('seconds').textContent = seconds;

      // Calculate total times
      const totalMs = now - startDate;
      const totalSeconds = Math.floor(totalMs / msInSecond);
      const totalMinutes = Math.floor(totalMs / msInMinute);
      const totalHours = Math.floor(totalMs / msInHour);
      const totalDays = Math.floor(totalMs / msInDay);
      const totalWeeks = Math.floor(totalDays / 7);
      const totalMonths = (years * 12) + months + (days / 30); // Approximate months including days fraction
      const totalYears = years + (months / 12) + (days / 365);

      // Update "totals" display
      document.getElementById('totalYears').textContent = totalYears.toFixed(2);
      document.getElementById('totalMonths').textContent = totalMonths.toFixed(1);
      document.getElementById('totalWeeks').textContent = totalWeeks;
      document.getElementById('totalDays').textContent = totalDays;
      document.getElementById('totalHours').textContent = totalHours;
      document.getElementById('totalMinutes').textContent = totalMinutes;
      document.getElementById('totalSeconds').textContent = totalSeconds;
    }

    setInterval(updateClock, 1000);
    updateClock(); // Initial call

    // Load the sidebar
    fetch("sidebar.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("sidebar-container").innerHTML = data;
  
        // Add toggle behavior after sidebar is loaded
        window.toggleSidebar = function() {
          document.getElementById("sidebar").classList.toggle("active");
        };
  
        // Close sidebar on link click (mobile only)
        document.querySelectorAll(".sidebar a").forEach(link => {
          link.addEventListener("click", () => {
            if (window.innerWidth <= 700) {
              document.getElementById("sidebar").classList.remove("active");
            }
          });
        });
      });

  </script>

</body>
</html>
